 document.addEventListener('readystatechange',event=>{if(event.target.readyState==='complete'){ var newDiv_7152e051412f0a2c534e6c121fad3198 = document.createElement("div"); newDiv_7152e051412f0a2c534e6c121fad3198.id='rk-wid-7152e051412f0a2c534e6c121fad3198'; newDiv_7152e051412f0a2c534e6c121fad3198.innerHTML = '<style type="text/css"> @media (max-width: 550px){ #RKCloseModal { top: 16px !important; right: 0px !important; width: 185px !important; } }</style><div id="RK-Widget-7152e051412f0a2c534e6c121fad3198" style="position:relative; z-index: 100000002; display: none"><div id="rkDimmerFrame" style="display: none; width: 100%; position: fixed; z-index: 9999991; top: 0px; left:0px; background: rgba(0,0,0,0.4); "></div><div id="rkModalHolder" style="display:none; width: 100%; position: absolute; top: 0px; z-index: 9999992;"> <div id="rkModalFrame" style="display:none; width: 100%; height: 100vh; position: fixed; top: 0px; left:0px; z-index: 9999992; transform: translate(0,-100%);	transition: transform 0.3s cubic-bezier(0,0,0.3,1); "> <div id="mdl-wrap-7152e051412f0a2c534e6c121fad3198" style="margin: auto; max-width: 690px; width: 100%; height: 100vh; position: relative"> <iframe id="mdlFrame-7152e051412f0a2c534e6c121fad3198" src="https://reputationdatabase.com/website_marketing/show_widget/RK-42705-44588-9810-v2.js?wt=m&r=1" style="margin: auto; height:100vh; max-width:690px; width: 100%;" frameborder="0"></iframe> </div> </div></div><div id="rkFloatFrame-7152e051412f0a2c534e6c121fad3198" style="overflow: hidden; max-width: 440px; width: 100%; height: 126px !important; position: fixed; bottom: 0; right: 0; z-index: 999999"> <iframe id="fltFrame-7152e051412f0a2c534e6c121fad3198" src="https://reputationdatabase.com/website_marketing/show_widget/RK-42705-44588-9810-v2.js?wt=f&r=1" frameborder="0" height="126" width="100%" style="height: inherit; max-width: 100%px; width: 100%"></iframe> <div style="position: absolute; top: 7px; right: 19px; width: 16px; height: 16px; cursor: pointer;" id="RKCloseFloat-7152e051412f0a2c534e6c121fad3198"></div></div></div>'; document.getElementsByTagName('body')[0].appendChild(newDiv_7152e051412f0a2c534e6c121fad3198); var body = document.body, html = document.documentElement; var widgetData = { widgetHash: "7152e051412f0a2c534e6c121fad3198", widgetPopupType: "review", reviewsCount: "75", widgetId: "9810", updateHash: "682aebe259486" }; var stopRotation = 0; var height = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight); function toggleElements(elements, specifiedDisplay) { fixSize(); if (typeof specifiedDisplay == "undefined") { if (elements[0].style.display == "block") { elements.forEach(el => el.style.display = 'none'); } else { elements.forEach(el => el.style.display = 'block'); } } else { elements.forEach(el => el.style.display = specifiedDisplay); } return true; } var closeButton = document.getElementById('RKCloseFloat-' + widgetData.widgetHash); if (closeButton) { closeButton.addEventListener('click', function () { toggleElements(document.querySelectorAll('#rkFloatFrame-' + widgetData.widgetHash), 'none'); stopRotation = 1; }); } document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkDimmerFrame')[0].style.height = "100%"; window.addEventListener("message", function (event) { var EventSplit = event.data; setTimeout(function () { if (typeof EventSplit.split !== "function") { return false; } var EvDt = EventSplit.split("::"); if (event.data == "Open::" + widgetData.widgetHash) { stopRotation = 1; toggleElements(document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkModalHolder'), 'block'); toggleElements(document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkModalFrame'), 'block'); setTimeout(() => { document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkModalFrame')[0].style.transform = "translate(0,0%)"; }, 50); toggleElements(document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkDimmerFrame'), 'block'); document.getElementById('mdlFrame-' + widgetData.widgetHash).contentWindow.focus(); } if (event.data == "Close::" + widgetData.widgetHash) { document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkModalFrame')[0].style.transform = "translate(0,-100%)"; stopRotation = 0; setTimeout(() => { toggleElements(document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkModalHolder'), 'none'); toggleElements(document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkModalFrame'), 'none'); toggleElements(document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkDimmerFrame'), 'none'); }, 350); } if (event.data == "WidgetClose::" + widgetData.widgetHash) { document.getElementById("fltFrame-" + widgetData.widgetHash).style.display = "none"; } if (EvDt[0] == "URL" && EvDt[1] == widgetData.widgetHash) { openHref(EvDt[2]); } if (EvDt[0] == "Rating" && EvDt[1] == widgetData.widgetHash) { var fltFrame = document.getElementById("fltFrame-" + widgetData.widgetHash).contentWindow; fltFrame.postMessage("ChangeReviewFloat::" + widgetData.widgetHash + "::" + EvDt[2], "*"); } }, 500); }); document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkModalFrame')[0].addEventListener("click", closeRkModal); function closeRkModal() { document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkModalFrame')[0].style.transform = "translate(0,-100%)"; setTimeout(() => { stopRotation = 0; toggleElements(document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkModalHolder'), 'none'); toggleElements(document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkModalFrame'), 'none'); toggleElements(document.querySelectorAll('#RK-Widget-' + widgetData.widgetHash + ' #rkDimmerFrame'), 'none'); }, 350); } function openHref(href) { window.location = href; } function fixSize() { var ch = document.querySelector("#mdl-wrap-" + widgetData.widgetHash).style.height; var cw = document.querySelector("#mdl-wrap-" + widgetData.widgetHash).style.width; var mdlFrame = document.querySelector("#mdlFrame-" + widgetData.widgetHash); mdlFrame.style.margin = 'auto'; mdlFrame.style.height = ch + ' !important'; mdlFrame.style.maxWidth = cw + ' !important'; mdlFrame.style.width = '100%'; } var fltLoaded = 0; var mdlLoaded = 0; function RegIFrameLoadComplete(frtype) { if (frtype == "flt") { fltLoaded = 1; } if (frtype == "mdl") { mdlLoaded = 1; } } function CheckIFrameLoadComplete(frtype) { if (frtype == "flt" && fltLoaded == 1) { return true; } if (frtype == "mdl" && mdlLoaded == 1) { return true; } return false; } document.getElementById("fltFrame-" + widgetData.widgetHash).onload = function () { RegIFrameLoadComplete("flt"); }; document.getElementById("mdlFrame-" + widgetData.widgetHash).onload = function () { RegIFrameLoadComplete("mdl"); }; var loaded; function checkloadFrame() { var res1 = CheckIFrameLoadComplete("flt"); var res2 = CheckIFrameLoadComplete("mdl"); if (res1 && res2) { if (widgetData.widgetPopupType == "review") { setTimeout(function () { startRotation(); }, 10000); } if (widgetData.widgetPopupType == "rating") { setTimeout(function () { startPageRotation(); }, 10000); } clearTimeout(loaded); document.querySelector("#fltFrame-" + widgetData.widgetHash).style.height = "inherit"; document.querySelector("#RK-Widget-" + widgetData.widgetHash).style.display = "block"; } else { loaded = setTimeout(function () { checkloadFrame(); }, 3000); } } function checkloadFramePg() { if (widgetData.widgetPopupType == "rating") { setTimeout(function () { startPageRotation(); }, 10000); } clearTimeout(loaded); document.querySelector("#fltFrame-" + widgetData.widgetHash).style.height = "inherit"; document.querySelector("#RK-Widget-" + widgetData.widgetHash).style.display = "block"; loaded = setTimeout(function () { checkloadFrame(); }, 3000); } var reviewIndex = 2; function startPageRotation() { if (stopRotation == 1) { loaded = setTimeout(function () { checkloadFramePg(); }, 5000); } else { var fltFrame = document.getElementById("fltFrame-" + widgetData.widgetHash).contentWindow; var mdlFrame = document.getElementById("mdlFrame-" + widgetData.widgetHash).contentWindow; fltLoaded = 0; mdlLoaded = 0; document.querySelector("#RK-Widget-" + widgetData.widgetHash).style.display = "none"; var reviewHash = "&r=" + reviewIndex; if (reviewIndex == widgetData.reviewsCount) { reviewIndex = 1; } else { reviewIndex++; } fltFrame.postMessage("ChangeReviewFloat::" + widgetData.widgetHash + "::" + reviewIndex, "*"); mdlFrame.postMessage("ChangeReviewModal::" + widgetData.widgetHash + "::" + reviewIndex, "*"); loaded = setTimeout(function () { checkloadFramePg(); }, 5000); } } function updateRKstatsV2() { var refer = document.referrer; var docUrl = document.URL; var s = widgetData.widgetId; var updh = widgetData.updateHash; fetch("https://reputationdatabase.com/website_marketing/update_stats_v2", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ wid: s, referer: refer, doc_url: docUrl, updh: updh }) }).then(response => response.json()) .then(data => console.log(data)) .catch(error => console.error('Error:', error)); } function startRotation() { if (stopRotation == 1) { loaded = setTimeout(function () { checkloadFrame(); }, 5000); } else { var fltFrame = document.getElementById("fltFrame-" + widgetData.widgetHash).contentWindow; var mdlFrame = document.getElementById("mdlFrame-" + widgetData.widgetHash).contentWindow; document.querySelector("#RK-Widget-" + widgetData.widgetHash).style.display = "none"; var reviewHash = "&r=" + reviewIndex; if (parseInt(reviewIndex) == parseInt(widgetData.reviewsCount)) { reviewIndex = 1; } else { reviewIndex++; } fltFrame.postMessage("ChangeRatingFloat::" + widgetData.widgetHash + "::" + reviewIndex, "*"); mdlFrame.postMessage("ChangeRatingModal::" + widgetData.widgetHash + "::" + reviewIndex, "*"); loaded = setTimeout(function () { checkloadFrame(); }, 5000); } } window.addEventListener('load', (event) => { setTimeout(function () { updateRKstatsV2(); loaded = checkloadFrame(); }, 5000); });  }}); document.addEventListener("DOMContentLoaded", function(event) {  });